# POST-запрос

Цель: Познакомиться с запросом POST и научиться передавать данные на сервер.


Задание<br/>
×<br/>
В сети существует множество видов атак на посетителей веб-сайтов, которые могут привести к утечке персональных данных, различных доступов и даже к выполнению несанкционированных действий. Один из таких видов называется CSRF (Межсайтовая подделка запроса).

Если жертва заходит на сайт, созданный злоумышленником, от её лица тайно отправляется запрос на другой сервер (например, на сервер платёжной системы), осуществляющий некую вредоносную операцию (например, перевод денег на счёт злоумышленника). Для осуществления данной атаки жертва должна быть аутентифицирована на том сервере, на который отправляется запрос, и этот запрос не должен требовать какого-либо подтверждения со стороны пользователя, который не может быть проигнорирован или подделан атакующим скриптом.

Основное применение CSRF — вынуждение выполнения каких-либо действий на уязвимом сайте от лица жертвы (изменение пароля, секретного вопроса для восстановления пароля, почты, добавление администратора и т. д.)

Один из способов защиты, это использование специального токена, который генерируется для каждой страницы и отправляется с формами на сервер, при выполнении потенциально опасных действий.

solution.js<br/>
Реализуйте и экспортируйте по умолчанию функцию, которая с помощью http запросов, эмулируя поведение пользователя, выполняет регистрацию на сайте.

Функция принимает на вход четыре параметра:

Адрес формы регистрации (get запрос)<br/>
Адрес по которому необходимо отправить данные формы (post запрос)<br/>
nickname - значение поля nickname из формы регистрации<br/>
Коллбек, который будет вызван после окончания операции. Коллбек принимает на вход единственный параметр - err в случае если произошла ошибка.
На сайте реализована защита от csrf, поэтому перед непосредственной отправкой данных формы на соответствующий адрес, необходимо сделать запрос на форму регистрации, извлечь из нее токен и отправить его вместе с данными формы по нужному адресу.

В упражнении доступен веб-доступ, по которому открывается этот сайт. Попробуйте посмотреть исходный код страницы, найти там этот токен, а так же выполните регистрацию.

Обработка ошибок<br/>
В случае если первый запрос вернет статус не 200, то вызываем коллбек и передаем туда ошибку. В случае если второй запрос вернет статус не 302, то так же вызываем коллбек и передаем ошибку.

Подсказки<br/>
Для извлечения токена из тела запроса, воспользуйтесь функцией getToken

84% пользователей решило эту задачу самостоятельно